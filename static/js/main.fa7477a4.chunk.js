(this["webpackJsonpglasswall-file-type-detection"]=this["webpackJsonpglasswall-file-type-detection"]||[]).push([[0],{100:function(e,t,a){e.exports=a.p+"static/media/logo.f2df34b5.svg"},167:function(e,t,a){},282:function(e,t,a){e.exports=a.p+"static/media/api.980d9789.yaml"},289:function(e,t,a){e.exports=a(745)},294:function(e,t,a){},301:function(e,t){},303:function(e,t){},745:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(46),c=a.n(l),i=(a(294),a(71)),s=a(100),o=a.n(s),u=function(e){e.onApiKeyChange,e.apiKey,e.usePublicKey,e.togglePublicKey;return r.a.createElement("div",{className:"app-header"},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:o.a,alt:"Logo",height:"90"})))},m=a(19);a(167);var p=function(e){return r.a.createElement("span",{className:"input-validation validation-popup"},e.errorMessage)},f=a(746),d=function(e){var t=e.apiKey,a=e.setApiKey,l=e.usePublicKey,c=e.setUsePublicKey,i=Object(n.useState)(""),s=Object(m.a)(i,2),o=s[0],u=s[1];return r.a.createElement("div",{className:"api-key-wrapper"},r.a.createElement("input",{className:"api-key-input",type:"text",placeholder:"Api Key",onInput:function(e){""===e.target.value?u("You must provide a key."):u(""),a(e.target.value)},value:t,disabled:l}),r.a.createElement(f.a,{in:""!==o,timeout:300,classNames:"validation",unmountOnExit:!0},r.a.createElement(p,{errorMessage:o})),r.a.createElement("label",null,r.a.createElement("input",{className:"use-public-api-key-input",type:"checkbox",onInput:function(){l||u(""),c(!l)},checked:l}),"Use Public Key (Rate Limited)"))},E=function(e){return r.a.createElement("div",{className:"app-header"},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:o.a,alt:"Logo",height:"90"})),r.a.createElement(d,e))},v=function(){return r.a.createElement("h1",null,"Drag and drop files to determine their file type. Files in Zip's will be determined separately.")};var h=function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(!1),s=Object(m.a)(i,2),o=s[0],u=s[1],p=function(e){e.preventDefault(),e.stopPropagation()},f=function(e){e.preventDefault(),e.stopPropagation(),u(o++),e.dataTransfer.items&&e.dataTransfer.items.length>0&&c(!0)},d=function(e){e.preventDefault(),e.stopPropagation(),u(o--),0===o&&c(!1)},E=function(t){if(t.preventDefault(),t.stopPropagation(),c(!1),t.dataTransfer.files&&t.dataTransfer.files.length>0){e.handleDrop(t.dataTransfer.files);try{t.dataTransfer.clearData()}catch(a){}u(0)}},v=r.a.createRef();return Object(n.useEffect)((function(){var e=v.current;return e.addEventListener("dragenter",f),e.addEventListener("dragleave",d),e.addEventListener("dragover",p),e.addEventListener("drop",E),function(){e.removeEventListener("dragenter",f),e.removeEventListener("dragleave",d),e.removeEventListener("dragover",p),e.removeEventListener("drop",E)}}),[]),r.a.createElement("div",{className:"drop-border",ref:v},l&&r.a.createElement("div",{className:"drop-border-dragging"}),e.children)},b=a(286);a(299);var g=function(e){var t,a=e.fileName,n=e.fileExtension,l=e.fileType,c=e.fileSize;return t=a.length>40?a.substring(0,40):a,r.a.createElement("tr",{className:n!==l?"type-danger":""},r.a.createElement(b.a,{content:a},r.a.createElement("td",null,a===t?a:"".concat(t,"...").concat(n))),r.a.createElement("td",null,n),r.a.createElement("td",null,l),r.a.createElement("td",null,c))},y=function(e){var t=e.results;return r.a.createElement("table",{cellSpacing:"0",cellPadding:"0"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"header-row"},r.a.createElement("th",null,"File Name"),r.a.createElement("th",null,"Declared File Type"),r.a.createElement("th",null,"Actual File Type"),r.a.createElement("th",null,"File Size"))),r.a.createElement("tbody",null,t&&t.map((function(e,t){return r.a.createElement(g,Object.assign({key:"result-".concat(t)},e))}))))},j=function(){return r.a.createElement("h1",{className:"table-header"},"File Attributes")},N=function(e){var t=e.results;return r.a.createElement("div",{className:"file-attributes table-container"},r.a.createElement(j,null),r.a.createElement(y,{results:t}))},O=function(e){var t=e.results,a=e.filesProcessed;return r.a.createElement(f.a,{in:a,timeout:{enter:500,exit:500},classNames:"results"},r.a.createElement("section",{className:"results-section"},a&&r.a.createElement(N,{results:t})))};var w=function(e){return e.loading?r.a.createElement("div",{className:"spinner-container"},r.a.createElement("div",{className:"spinner"})):null},P=a(72),x=a.n(P),S=a(163),K=function(e,t){var a=new FormData;return a.append("file",t),console.log(t),fetch("https://xugc5ib648.execute-api.eu-west-1.amazonaws.com/Prod/api/FileTypeDetection",{method:"POST",body:a,headers:{"x-api-key":e}})},k=a(281),T=a.n(k),L=function(e){var t=new T.a;return new Promise((function(a,n){t.loadAsync(e).then((function(e){var t=Object.values(e.files),r=[];Array.from(t).forEach(function(){var e=Object(S.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.dir||r.push(t.async("blob").then((function(e){return e.name=t.name,e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Promise.all(r).then(a,n)}),n)}))},D=function(e,t,a,n,r){r(!0),n(!1),a([]);var l=[],c=[],i=function(e,a){return new Promise((function(n){var r={fileName:e.name,fileExtension:a,fileType:"Unknown",fileSize:0},l=function(){var a=Object(S.a)(x.a.mark((function a(){var l,s;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,K(t.apiKey,e);case 3:return l=a.sent,a.next=6,c(l);case 6:s=a.sent,i(s,e),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:n(r);case 14:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(){return a.apply(this,arguments)}}(),c=function(e){return 200!==e.status?(console.log(e),{fileType:"Error",fileSize:0,status:e.status}):e.json()},i=function(e){return r.fileType=e.fileType.toLowerCase(),r.fileSize=e.fileSize,e};l()}))};Array.from(e).forEach((function(e){var t=e.name.split(".").pop().toLowerCase();if("zip"===t){var a=L(e).then((function(a){a.forEach((function(a){t=a.name.split(".").pop().toLowerCase(),a.name="["+e.name+"] -> "+a.name,c.push(i(a,t))}))}),(function(a){console.log(a),c.push(i(e,t))}));l.push(a)}else c.push(i(e,t))})),Promise.all(l).then((function(e){Promise.all(c).then((function(e){a(e),n(!0),r(!1)}))}),(function(e){console.log(e)}))};var z=function(e){var t=Object(n.useState)(null),a=Object(m.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(!1),s=Object(m.a)(i,2),o=s[0],u=s[1],p=Object(n.useState)(!1),f=Object(m.a)(p,2),d=f[0],E=f[1];return r.a.createElement("div",{className:"app filedrop"},r.a.createElement("div",{className:"app-body"},r.a.createElement(v,null),r.a.createElement(h,{handleDrop:function(t){return D(t,e,c,u,E)}},r.a.createElement("div",{className:"loading-container"},r.a.createElement(w,{key:6,loading:d}))),r.a.createElement(O,{results:l,filesProcessed:o})))};var F=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!0),i=Object(m.a)(c,2),s=i[0],o=i[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(E,{apiKey:a,setApiKey:l,usePublicKey:s,setUsePublicKey:o}),r.a.createElement(z,{apiKey:s?"v1j1jXSdPo8Z7iRW4H34va89ho9mt6KV5y9zezVn":a}))},A=a(282),I=a.n(A),C=a(283),U=a.n(C),M=(a(744),function(){return Object(n.useEffect)((function(){var e=setInterval((function(){var t=document.querySelector(".try-out button");null!==t&&(t.click(),clearInterval(e))}),10)})),r.a.createElement(r.a.Fragment,null,r.a.createElement(u,null),r.a.createElement(U.a,{url:window.location.origin+I.a,docExpansion:"full",defaultModelExpandDepth:"1"}))}),R=a(35);c.a.render(r.a.createElement((function(){return r.a.createElement(i.a,{basename:"/"},r.a.createElement(R.c,null,r.a.createElement(R.a,{path:"/drop"},r.a.createElement(F,null)),r.a.createElement(R.a,null,r.a.createElement(M,null))))}),null),document.getElementById("root"))}},[[289,1,2]]]);
//# sourceMappingURL=main.fa7477a4.chunk.js.map